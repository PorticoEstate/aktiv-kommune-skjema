<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>Send inn feil eller forslag</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
    }

    label {
      display: block;
      margin: 1rem 0 0.3rem;
      font-weight: bold;
    }

    input[type="text"] {
      width: 400px; /* Økt bredde på tittelfeltet */
      padding: 0.4rem;
    }

    textarea {
      width: 400px;  /* Økt bredde */
      height: 120px; /* Økt høyde */
      padding: 0.4rem;
    }

    select {
      margin-top: 0.3rem;
      padding: 0.3rem;
    }

    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
    }
  </style>
</head>
<body>
  <h1>Send inn feil eller forslag</h1>
  <form id="feedbackForm">
    <label for="title">Tittel:</label>
    <input type="text" id="title" name="title" required />

    <label for="body">Beskrivelse:</label>
    <textarea id="body" name="body" required></textarea>

    <label for="label">Kategori:</label>
    <select id="label" name="label">
      <option>Ny funksjonalitet</option>
      <option>Kritisk feil</option>
      <option>Feil</option>
      <option>Forbedringsønske</option>
    </select>

    <br />
    <button type="submit">Send inn</button>
  </form>

  <p id="result"></p>

  <script>
    document.getElementById("feedbackForm").addEventListener("submit", async function (event) {
      event.preventDefault();
      const title = document.getElementById("title").value;
      const body = document.getElementById("body").value;
      const label = document.getElementById("label").value;

      const response = await fetch("/.netlify/functions/create-issue", {
        method: "POST",
        body: JSON.stringify({ title, body, label }),
      });

      const result = await response.json();
      document.getElementById("result").textContent = result.message || "Ukjent feil oppstod.";
    });
  </script>
</body>
</html>
